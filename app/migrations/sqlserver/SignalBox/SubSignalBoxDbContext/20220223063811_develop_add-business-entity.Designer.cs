// <auto-generated />
using System;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;
using SignalBox.Infrastructure;

namespace sqlserver.SignalBox.SubSignalBoxDbContext
{
    [DbContext(typeof(SignalBoxDbContext))]
    [Migration("20220223063811_develop_add-business-entity")]
    partial class develop_addbusinessentity
    {
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("Relational:MaxIdentifierLength", 128)
                .HasAnnotation("ProductVersion", "5.0.14")
                .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

            modelBuilder.Entity("CustomerSegment", b =>
                {
                    b.Property<long>("InSegmentId")
                        .HasColumnType("bigint");

                    b.Property<long>("SegmentsId")
                        .HasColumnType("bigint");

                    b.HasKey("InSegmentId", "SegmentsId");

                    b.HasIndex("SegmentsId");

                    b.ToTable("SegmentTrackedUser");
                });

            modelBuilder.Entity("ItemsRecommendationRecommendableItem", b =>
                {
                    b.Property<long>("ItemsId")
                        .HasColumnType("bigint");

                    b.Property<long>("RecommendationsId")
                        .HasColumnType("bigint");

                    b.HasKey("ItemsId", "RecommendationsId");

                    b.HasIndex("RecommendationsId");

                    b.ToTable("ItemsRecommendationRecommendableItem");
                });

            modelBuilder.Entity("ItemsRecommenderRecommendableItem", b =>
                {
                    b.Property<long>("ItemsId")
                        .HasColumnType("bigint");

                    b.Property<long>("RecommendersId")
                        .HasColumnType("bigint");

                    b.HasKey("ItemsId", "RecommendersId");

                    b.HasIndex("RecommendersId");

                    b.ToTable("ItemsRecommenderRecommendableItem");
                });

            modelBuilder.Entity("MetricRecommenderEntityBase", b =>
                {
                    b.Property<long>("LearningFeaturesId")
                        .HasColumnType("bigint");

                    b.Property<long>("RecommendersId")
                        .HasColumnType("bigint");

                    b.HasKey("LearningFeaturesId", "RecommendersId");

                    b.HasIndex("RecommendersId");

                    b.ToTable("FeatureRecommenderEntityBase");
                });

            modelBuilder.Entity("ParameterParameterSetRecommender", b =>
                {
                    b.Property<long>("ParameterSetRecommendersId")
                        .HasColumnType("bigint");

                    b.Property<long>("ParametersId")
                        .HasColumnType("bigint");

                    b.HasKey("ParameterSetRecommendersId", "ParametersId");

                    b.HasIndex("ParametersId");

                    b.ToTable("ParameterParameterSetRecommender");
                });

            modelBuilder.Entity("SignalBox.Core.Business", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("CommonId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("CommonId", "EnvironmentId")
                        .IsUnique();

                    b.ToTable("Businesses");
                });

            modelBuilder.Entity("SignalBox.Core.Customer", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)")
                        .HasColumnName("CommonUserId");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("CommonId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("CommonId", "EnvironmentId")
                        .IsUnique();

                    b.ToTable("TrackedUsers");

                    b.HasData(
                        new
                        {
                            Id = -1L,
                            CommonId = "anonymous",
                            Created = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            LastUpdated = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            Name = "Anonymous Customer",
                            Properties = "{}"
                        });
                });

            modelBuilder.Entity("SignalBox.Core.CustomerEvent", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("CustomerId")
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("CommonUserId");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<string>("EventId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("EventKind")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("EventType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Kind")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("RecommendationCorrelatorId")
                        .HasColumnType("bigint");

                    b.Property<long?>("SourceId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("Timestamp")
                        .HasColumnType("datetimeoffset");

                    b.Property<long?>("TrackedUserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("RecommendationCorrelatorId");

                    b.HasIndex("SourceId");

                    b.HasIndex("Timestamp");

                    b.HasIndex("TrackedUserId");

                    b.HasIndex("EventId", "EnvironmentId")
                        .IsUnique()
                        .HasFilter("[EventId] IS NOT NULL AND [EnvironmentId] IS NOT NULL");

                    b.ToTable("TrackedUserEvents");
                });

            modelBuilder.Entity("SignalBox.Core.CustomerMetricDailyNumericAggregate", b =>
                {
                    b.Property<DateTimeOffset>("CalendarDate")
                        .HasColumnType("datetimeoffset");

                    b.Property<long>("CustomerId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("EndDate")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("FirstOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.Property<double>("NumericValue")
                        .HasColumnType("float");

                    b.Property<DateTimeOffset>("StartDate")
                        .HasColumnType("datetimeoffset");

                    b.ToView("View_CustomerMetricDailyNumericAggregate");
                });

            modelBuilder.Entity("SignalBox.Core.CustomerMetricDailyStringAggregate", b =>
                {
                    b.Property<DateTimeOffset>("CalendarDate")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("Created")
                        .HasColumnType("datetimeoffset");

                    b.Property<long>("CustomerId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("FirstOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.Property<double>("StringValue")
                        .HasColumnType("float");

                    b.Property<int>("ValueCount")
                        .HasColumnType("int");

                    b.ToView("View_CustomerMetricDailyStringAggregate");
                });

            modelBuilder.Entity("SignalBox.Core.CustomerMetricWeeklyNumericAggregate", b =>
                {
                    b.Property<DateTimeOffset>("FirstOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.Property<int>("WeeklyDistinctCustomerCount")
                        .HasColumnType("int");

                    b.Property<double>("WeeklyMeanNumericValue")
                        .HasColumnType("float");

                    b.ToView("View_CustomerMetricWeeklyNumericAggregate");
                });

            modelBuilder.Entity("SignalBox.Core.CustomerMetricWeeklyStringAggregate", b =>
                {
                    b.Property<DateTimeOffset>("FirstOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastOfWeek")
                        .HasColumnType("datetimeoffset");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.Property<string>("StringValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("WeeklyDistinctCustomerCount")
                        .HasColumnType("int");

                    b.Property<int>("WeeklyValueCount")
                        .HasColumnType("int");

                    b.ToView("View_CustomerMetricWeeklyStringAggregate");
                });

            modelBuilder.Entity("SignalBox.Core.Environment", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasMaxLength(32)
                        .HasColumnType("nvarchar(32)");

                    b.HasKey("Id");

                    b.ToTable("Environments");
                });

            modelBuilder.Entity("SignalBox.Core.HashedApiKey", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("AlgorithmName")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("ApiKeyType")
                        .HasColumnType("int");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("HashedKey")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset?>("LastExchanged")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Scope")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("TotalExchanges")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.ToTable("ApiKeys");
                });

            modelBuilder.Entity("SignalBox.Core.IntegratedSystem", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("ApiKey")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Cache")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset?>("CacheLastRefreshed")
                        .HasColumnType("datetimeoffset");

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("IntegratedSystem");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<string>("IntegrationStatus")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValueSql("('NotConfigured')");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("SystemType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("TokenResponse")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset?>("TokenResponseUpdated")
                        .HasColumnType("datetimeoffset");

                    b.HasKey("Id");

                    b.HasIndex("EnvironmentId");

                    b.ToTable("IntegratedSystems");

                    b.HasDiscriminator<string>("Discriminator").HasValue("IntegratedSystem");
                });

            modelBuilder.Entity("SignalBox.Core.LatestMetricVersion", b =>
                {
                    b.Property<long>("CustomerId")
                        .HasColumnType("bigint");

                    b.Property<long>("HistoricCustomerMetricId")
                        .HasColumnType("bigint");

                    b.Property<int>("MaxVersion")
                        .HasColumnType("int");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.ToView("View_MaxHistoricCustomerMetricVersion");
                });

            modelBuilder.Entity("SignalBox.Core.Metric", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Scope")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("Customer");

                    b.Property<string>("ValueType")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("CommonId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("CommonId", "EnvironmentId")
                        .IsUnique();

                    b.ToTable("Features");

                    b.HasData(
                        new
                        {
                            Id = 100L,
                            CommonId = "revenue",
                            Created = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            LastUpdated = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            Name = "Revenue",
                            Properties = "{}",
                            Scope = "Customer",
                            ValueType = "Numeric"
                        },
                        new
                        {
                            Id = 101L,
                            CommonId = "total_events",
                            Created = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            LastUpdated = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            Name = "Total Events",
                            Properties = "{}",
                            Scope = "Customer",
                            ValueType = "Numeric"
                        });
                });

            modelBuilder.Entity("SignalBox.Core.MetricDailyBinValueNumeric", b =>
                {
                    b.Property<double>("BinFloor")
                        .HasColumnType("float");

                    b.Property<string>("BinRange")
                        .HasColumnType("nvarchar(max)");

                    b.Property<double>("BinWidth")
                        .HasColumnType("float");

                    b.Property<int>("CustomerCount")
                        .HasColumnType("int");

                    b.ToTable("MetricDailyBinNumericValues", t => t.ExcludeFromMigrations());
                });

            modelBuilder.Entity("SignalBox.Core.MetricDailyBinValueString", b =>
                {
                    b.Property<int>("CustomerCount")
                        .HasColumnType("int");

                    b.Property<string>("StringValue")
                        .HasColumnType("nvarchar(max)");

                    b.ToTable("MetricDailyBinStringValues", t => t.ExcludeFromMigrations());
                });

            modelBuilder.Entity("SignalBox.Core.MetricGenerator", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("FilterSelectAggregateSteps")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("GeneratorType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset?>("LastCompleted")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset?>("LastEnqueued")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.Property<string>("TimeWindow")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("MetricId");

                    b.ToTable("FeatureGenerators");

                    b.HasData(
                        new
                        {
                            Id = 100L,
                            Created = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            FilterSelectAggregateSteps = "[{\"Order\":1,\"Filter\":null,\"Select\":{\"PropertyNameMatch\":null},\"Aggregate\":null},{\"Order\":2,\"Filter\":null,\"Select\":null,\"Aggregate\":{\"AggregationType\":0}}]",
                            GeneratorType = "FilterSelectAggregate",
                            LastUpdated = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            MetricId = 101L
                        });
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.Destinations.MetricDestinationBase", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<long>("ConnectedSystemId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("ConnectedSystemId");

                    b.HasIndex("MetricId");

                    b.ToTable("FeatureDestinations");

                    b.HasDiscriminator<string>("Discriminator").HasValue("MetricDestinationBase");
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.MetricValueBase", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("HistoricCustomerMetric");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("MetricId")
                        .HasColumnType("bigint");

                    b.Property<double?>("NumericValue")
                        .HasColumnType("float");

                    b.Property<string>("StringValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("Version")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.ToTable("HistoricTrackedUserFeatures");

                    b.HasDiscriminator<string>("Discriminator").HasValue("MetricValueBase");
                });

            modelBuilder.Entity("SignalBox.Core.ModelRegistration", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("HostingType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Key")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("ModelType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ScoringUrl")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Swagger")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.ToTable("ModelRegistrations");
                });

            modelBuilder.Entity("SignalBox.Core.Parameter", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("DefaultValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ParameterType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("CommonId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("CommonId", "EnvironmentId")
                        .IsUnique();

                    b.ToTable("Parameters");
                });

            modelBuilder.Entity("SignalBox.Core.RecommendableItem", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("BenefitType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("Fixed");

                    b.Property<double>("BenefitValue")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("float")
                        .HasDefaultValue(1.0);

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<double?>("DirectCost")
                        .HasColumnType("float");

                    b.Property<string>("Discriminator")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("Product");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("NumberOfRedemptions")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<string>("PromotionType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasColumnType("nvarchar(max)")
                        .HasDefaultValue("Other");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("CommonId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("CommonId", "EnvironmentId")
                        .IsUnique();

                    b.ToTable("RecommendableItems");

                    b.HasData(
                        new
                        {
                            Id = -1L,
                            BenefitType = "Percent",
                            BenefitValue = 0.0,
                            CommonId = "default",
                            Created = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            Description = "The default promotion. When this promotion is recommended, no action should be taken.",
                            Discriminator = "RecommendableItem",
                            LastUpdated = new DateTimeOffset(new DateTime(1, 1, 1, 0, 0, 0, 0, DateTimeKind.Unspecified), new TimeSpan(0, 0, 0, 0, 0)),
                            Name = "Default Promotion",
                            NumberOfRedemptions = 0,
                            PromotionType = "Discount",
                            Properties = "{}"
                        });
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.Destinations.RecommendationDestinationBase", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<long>("ConnectedSystemId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("RecommenderId")
                        .HasColumnType("bigint");

                    b.Property<string>("Trigger")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("ConnectedSystemId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("RecommenderId");

                    b.ToTable("RecommendationDestinations");

                    b.HasDiscriminator<string>("Discriminator").HasValue("RecommendationDestinationBase");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.ItemsRecommendation", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("ModelInput")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelInputType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelOutput")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelOutputType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("RecommendationCorrelatorId")
                        .HasColumnType("bigint");

                    b.Property<long?>("RecommenderId")
                        .HasColumnType("bigint");

                    b.Property<string>("RecommenderType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Scores")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("TargetMetricId")
                        .HasColumnType("bigint");

                    b.Property<long?>("TrackedUserId")
                        .HasColumnType("bigint");

                    b.Property<string>("Trigger")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("RecommendationCorrelatorId");

                    b.HasIndex("RecommenderId");

                    b.HasIndex("TargetMetricId");

                    b.HasIndex("TrackedUserId");

                    b.ToTable("ItemsRecommendations");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.ParameterSetRecommendation", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("ModelInput")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelInputType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelOutput")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelOutputType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("RecommendationCorrelatorId")
                        .HasColumnType("bigint");

                    b.Property<long?>("RecommenderId")
                        .HasColumnType("bigint");

                    b.Property<string>("RecommenderType")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("TargetMetricId")
                        .HasColumnType("bigint");

                    b.Property<long?>("TrackedUserId")
                        .HasColumnType("bigint");

                    b.Property<string>("Trigger")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("RecommendationCorrelatorId");

                    b.HasIndex("RecommenderId");

                    b.HasIndex("TargetMetricId");

                    b.HasIndex("TrackedUserId");

                    b.ToTable("ParameterSetRecommendations");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.RecommendationCorrelator", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("ModelRegistrationId")
                        .HasColumnType("bigint");

                    b.Property<long?>("ModelRegistrationId1")
                        .HasColumnType("bigint");

                    b.Property<long?>("RecommenderId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("ModelRegistrationId");

                    b.HasIndex("ModelRegistrationId1");

                    b.HasIndex("RecommenderId");

                    b.ToTable("RecommendationCorrelators");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.InvokationLogEntry", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<long?>("CorrelatorId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<DateTimeOffset?>("InvokeEnded")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("InvokeStarted")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Message")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Messages")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ModelResponse")
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("RecommenderEntityBaseId")
                        .HasColumnType("bigint");

                    b.Property<long>("RecommenderId")
                        .HasColumnType("bigint");

                    b.Property<string>("RecommenderType")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Status")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool?>("Success")
                        .HasColumnType("bit");

                    b.Property<long?>("TrackedUserId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("CorrelatorId");

                    b.HasIndex("InvokeStarted");

                    b.HasIndex("RecommenderEntityBaseId");

                    b.HasIndex("TrackedUserId");

                    b.ToTable("InvokationLogEntry");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.PerformanceReportBase", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("RecommenderId")
                        .HasColumnType("bigint");

                    b.HasKey("Id");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("RecommenderId");

                    b.ToTable("RecommenderPerformanceReports");

                    b.HasDiscriminator<string>("Discriminator").HasValue("PerformanceReportBase");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.RecommenderEntityBase", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("Arguments")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("CommonId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Discriminator")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<string>("ErrorHandling")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("ModelRegistrationId")
                        .HasColumnType("bigint");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Properties")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Settings")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("TriggerCollection")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("CommonId");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("ModelRegistrationId");

                    b.HasIndex("CommonId", "EnvironmentId")
                        .IsUnique();

                    b.ToTable("Recommenders");

                    b.HasDiscriminator<string>("Discriminator").HasValue("RecommenderEntityBase");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.RecommenderTargetVariableValue", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<DateTimeOffset>("End")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(450)");

                    b.Property<long>("RecommenderId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("Start")
                        .HasColumnType("datetimeoffset");

                    b.Property<double>("Value")
                        .HasColumnType("float");

                    b.Property<int>("Version")
                        .HasColumnType("int");

                    b.HasKey("Id");

                    b.HasIndex("RecommenderId", "Name", "Version")
                        .IsUnique()
                        .HasFilter("[Name] IS NOT NULL");

                    b.ToTable("RecommenderTargetVariableValue");
                });

            modelBuilder.Entity("SignalBox.Core.Segment", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("EnvironmentId");

                    b.ToTable("Segments");
                });

            modelBuilder.Entity("SignalBox.Core.Tenant", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("DatabaseName")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("Name")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.Property<string>("Status")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("DatabaseName")
                        .IsUnique();

                    b.HasIndex("Name")
                        .IsUnique();

                    b.ToTable("Tenant", t => t.ExcludeFromMigrations());
                });

            modelBuilder.Entity("SignalBox.Core.TenantMembership", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("TenantId")
                        .HasColumnType("bigint");

                    b.Property<string>("UserId")
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("TenantId");

                    b.HasIndex("UserId", "TenantId")
                        .IsUnique()
                        .HasFilter("[UserId] IS NOT NULL");

                    b.ToTable("TenantMembership", t => t.ExcludeFromMigrations());
                });

            modelBuilder.Entity("SignalBox.Core.TenantTermsOfServiceAcceptance", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<string>("AcceptedByUserId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long?>("TenantId")
                        .HasColumnType("bigint");

                    b.Property<string>("Version")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("TenantId");

                    b.HasIndex("Version", "AcceptedByUserId")
                        .IsUnique()
                        .HasFilter("[AcceptedByUserId] IS NOT NULL");

                    b.ToTable("TenantTermsOfServiceAcceptance", t => t.ExcludeFromMigrations());
                });

            modelBuilder.Entity("SignalBox.Core.TrackedUserSystemMap", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("IntegratedSystemId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<long>("TrackedUserId")
                        .HasColumnType("bigint");

                    b.Property<string>("UserId")
                        .IsRequired()
                        .HasColumnType("nvarchar(450)");

                    b.HasKey("Id");

                    b.HasIndex("IntegratedSystemId");

                    b.HasIndex("TrackedUserId");

                    b.HasIndex("UserId", "TrackedUserId", "IntegratedSystemId")
                        .IsUnique();

                    b.ToTable("TrackUserSystemMaps");
                });

            modelBuilder.Entity("SignalBox.Core.WebhookReceiver", b =>
                {
                    b.Property<long>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint")
                        .HasAnnotation("SqlServer:IdentityIncrement", 1)
                        .HasAnnotation("SqlServer:IdentitySeed", 1)
                        .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                    b.Property<DateTimeOffset>("Created")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("EndpointId")
                        .HasColumnType("nvarchar(450)");

                    b.Property<long?>("EnvironmentId")
                        .HasColumnType("bigint");

                    b.Property<long?>("IntegratedSystemId")
                        .HasColumnType("bigint");

                    b.Property<DateTimeOffset>("LastUpdated")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetimeoffset")
                        .HasDefaultValueSql("CURRENT_TIMESTAMP");

                    b.Property<string>("SharedSecret")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("Id");

                    b.HasIndex("EndpointId")
                        .IsUnique()
                        .HasFilter("[EndpointId] IS NOT NULL");

                    b.HasIndex("EnvironmentId");

                    b.HasIndex("IntegratedSystemId");

                    b.ToTable("WebhookReceivers");
                });

            modelBuilder.Entity("SignalBox.Core.Integrations.Custom.CustomIntegratedSystem", b =>
                {
                    b.HasBaseType("SignalBox.Core.IntegratedSystem");

                    b.Property<string>("ApplicationId")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ApplicationSecret")
                        .HasColumnType("nvarchar(max)");

                    b.HasDiscriminator().HasValue("CustomIntegratedSystem");
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.Destinations.HubspotContactPropertyMetricDestination", b =>
                {
                    b.HasBaseType("SignalBox.Core.Metrics.Destinations.MetricDestinationBase");

                    b.Property<string>("HubspotPropertyName")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasDiscriminator().HasValue("HubspotContactPropertyMetricDestination");
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.Destinations.WebhookMetricDestination", b =>
                {
                    b.HasBaseType("SignalBox.Core.Metrics.Destinations.MetricDestinationBase");

                    b.Property<string>("Endpoint")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.HasDiscriminator().HasValue("WebhookMetricDestination");
                });

            modelBuilder.Entity("SignalBox.Core.HistoricCustomerMetric", b =>
                {
                    b.HasBaseType("SignalBox.Core.Metrics.MetricValueBase");

                    b.Property<long>("TrackedUserId")
                        .HasColumnType("bigint");

                    b.HasIndex("TrackedUserId");

                    b.HasIndex("MetricId", "TrackedUserId", "Version")
                        .IsUnique();

                    b.ToTable("HistoricTrackedUserFeatures");

                    b.HasDiscriminator().HasValue("HistoricCustomerMetric");
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.GlobalMetricValue", b =>
                {
                    b.HasBaseType("SignalBox.Core.Metrics.MetricValueBase");

                    b.HasIndex("MetricId");

                    b.HasDiscriminator().HasValue("GlobalMetricValue");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.Destinations.SegmentSourceFunctionDestination", b =>
                {
                    b.HasBaseType("SignalBox.Core.Recommendations.Destinations.RecommendationDestinationBase");

                    b.Property<string>("Endpoint")
                        .HasColumnType("nvarchar(max)");

                    b.HasDiscriminator().HasValue("SegmentSourceFunctionDestination");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.Destinations.WebhookDestination", b =>
                {
                    b.HasBaseType("SignalBox.Core.Recommendations.Destinations.RecommendationDestinationBase");

                    b.Property<string>("Endpoint")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)")
                        .HasColumnName("WebhookDestination_Endpoint");

                    b.HasDiscriminator().HasValue("WebhookDestination");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.ItemsRecommenderPerformanceReport", b =>
                {
                    b.HasBaseType("SignalBox.Core.Recommenders.PerformanceReportBase");

                    b.Property<string>("PerformanceByItem")
                        .HasColumnType("nvarchar(max)");

                    b.HasDiscriminator().HasValue("ItemsRecommenderPerformanceReport");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.ItemsRecommender", b =>
                {
                    b.HasBaseType("SignalBox.Core.Recommenders.RecommenderEntityBase");

                    b.Property<long?>("BaselineItemId")
                        .HasColumnType("bigint");

                    b.Property<int?>("NumberOfItemsToRecommend")
                        .HasColumnType("int");

                    b.Property<long?>("TargetMetricId")
                        .HasColumnType("bigint");

                    b.HasIndex("BaselineItemId");

                    b.HasIndex("TargetMetricId");

                    b.HasDiscriminator().HasValue("ItemsRecommender");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.ParameterSetRecommender", b =>
                {
                    b.HasBaseType("SignalBox.Core.Recommenders.RecommenderEntityBase");

                    b.Property<string>("Key")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ParameterBounds")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ScoringUrl")
                        .HasColumnType("nvarchar(max)");

                    b.HasDiscriminator().HasValue("ParameterSetRecommender");
                });

            modelBuilder.Entity("CustomerSegment", b =>
                {
                    b.HasOne("SignalBox.Core.Customer", null)
                        .WithMany()
                        .HasForeignKey("InSegmentId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Segment", null)
                        .WithMany()
                        .HasForeignKey("SegmentsId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("ItemsRecommendationRecommendableItem", b =>
                {
                    b.HasOne("SignalBox.Core.RecommendableItem", null)
                        .WithMany()
                        .HasForeignKey("ItemsId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Recommendations.ItemsRecommendation", null)
                        .WithMany()
                        .HasForeignKey("RecommendationsId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("ItemsRecommenderRecommendableItem", b =>
                {
                    b.HasOne("SignalBox.Core.RecommendableItem", null)
                        .WithMany()
                        .HasForeignKey("ItemsId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Recommenders.ItemsRecommender", null)
                        .WithMany()
                        .HasForeignKey("RecommendersId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("MetricRecommenderEntityBase", b =>
                {
                    b.HasOne("SignalBox.Core.Metric", null)
                        .WithMany()
                        .HasForeignKey("LearningFeaturesId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Recommenders.RecommenderEntityBase", null)
                        .WithMany()
                        .HasForeignKey("RecommendersId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("ParameterParameterSetRecommender", b =>
                {
                    b.HasOne("SignalBox.Core.Recommenders.ParameterSetRecommender", null)
                        .WithMany()
                        .HasForeignKey("ParameterSetRecommendersId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Parameter", null)
                        .WithMany()
                        .HasForeignKey("ParametersId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("SignalBox.Core.Business", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.Customer", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.OwnsOne("SignalBox.Core.BusinessMembership", "BusinessMembership", b1 =>
                        {
                            b1.Property<long>("CustomerId")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("bigint")
                                .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                            b1.Property<long>("BusinessId")
                                .HasColumnType("bigint");

                            b1.HasKey("CustomerId");

                            b1.HasIndex("BusinessId");

                            b1.ToTable("TrackedUsers");

                            b1.HasOne("SignalBox.Core.Business", "Business")
                                .WithMany()
                                .HasForeignKey("BusinessId")
                                .OnDelete(DeleteBehavior.SetNull)
                                .IsRequired();

                            b1.WithOwner("Customer")
                                .HasForeignKey("CustomerId");

                            b1.Navigation("Business");

                            b1.Navigation("Customer");
                        });

                    b.Navigation("BusinessMembership");

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.CustomerEvent", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("SignalBox.Core.Recommendations.RecommendationCorrelator", "RecommendationCorrelator")
                        .WithMany()
                        .HasForeignKey("RecommendationCorrelatorId");

                    b.HasOne("SignalBox.Core.IntegratedSystem", "Source")
                        .WithMany()
                        .HasForeignKey("SourceId");

                    b.HasOne("SignalBox.Core.Customer", "Customer")
                        .WithMany()
                        .HasForeignKey("TrackedUserId");

                    b.Navigation("Customer");

                    b.Navigation("Environment");

                    b.Navigation("RecommendationCorrelator");

                    b.Navigation("Source");
                });

            modelBuilder.Entity("SignalBox.Core.IntegratedSystem", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId");

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.Metric", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.MetricGenerator", b =>
                {
                    b.HasOne("SignalBox.Core.Metric", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.OwnsOne("SignalBox.Core.Metrics.AggregateCustomerMetric", "AggregateCustomerMetric", b1 =>
                        {
                            b1.Property<long>("MetricGeneratorId")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("bigint")
                                .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                            b1.Property<string>("AggregationType")
                                .IsRequired()
                                .HasColumnType("nvarchar(max)");

                            b1.Property<string>("CategoricalValue")
                                .HasColumnType("nvarchar(max)");

                            b1.Property<long>("MetricId")
                                .HasColumnType("bigint");

                            b1.HasKey("MetricGeneratorId");

                            b1.HasIndex("MetricId");

                            b1.ToTable("FeatureGenerators");

                            b1.WithOwner()
                                .HasForeignKey("MetricGeneratorId");

                            b1.HasOne("SignalBox.Core.Metric", "Metric")
                                .WithMany()
                                .HasForeignKey("MetricId")
                                .OnDelete(DeleteBehavior.NoAction)
                                .IsRequired();

                            b1.Navigation("Metric");
                        });

                    b.OwnsOne("SignalBox.Core.Metrics.JoinTwoMetrics", "JoinTwoMetrics", b1 =>
                        {
                            b1.Property<long>("MetricGeneratorId")
                                .ValueGeneratedOnAdd()
                                .HasColumnType("bigint")
                                .HasAnnotation("SqlServer:ValueGenerationStrategy", SqlServerValueGenerationStrategy.IdentityColumn);

                            b1.Property<string>("JoinType")
                                .IsRequired()
                                .HasColumnType("nvarchar(max)");

                            b1.Property<long>("Metric1Id")
                                .HasColumnType("bigint");

                            b1.Property<long>("Metric2Id")
                                .HasColumnType("bigint");

                            b1.HasKey("MetricGeneratorId");

                            b1.HasIndex("Metric1Id");

                            b1.HasIndex("Metric2Id");

                            b1.ToTable("FeatureGenerators");

                            b1.HasOne("SignalBox.Core.Metric", "Metric1")
                                .WithMany()
                                .HasForeignKey("Metric1Id")
                                .OnDelete(DeleteBehavior.NoAction)
                                .IsRequired();

                            b1.HasOne("SignalBox.Core.Metric", "Metric2")
                                .WithMany()
                                .HasForeignKey("Metric2Id")
                                .OnDelete(DeleteBehavior.NoAction)
                                .IsRequired();

                            b1.WithOwner()
                                .HasForeignKey("MetricGeneratorId");

                            b1.Navigation("Metric1");

                            b1.Navigation("Metric2");
                        });

                    b.Navigation("AggregateCustomerMetric");

                    b.Navigation("JoinTwoMetrics");

                    b.Navigation("Metric");
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.Destinations.MetricDestinationBase", b =>
                {
                    b.HasOne("SignalBox.Core.IntegratedSystem", "ConnectedSystem")
                        .WithMany()
                        .HasForeignKey("ConnectedSystemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Metric", "Metric")
                        .WithMany("Destinations")
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ConnectedSystem");

                    b.Navigation("Metric");
                });

            modelBuilder.Entity("SignalBox.Core.Parameter", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.RecommendableItem", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.Destinations.RecommendationDestinationBase", b =>
                {
                    b.HasOne("SignalBox.Core.IntegratedSystem", "ConnectedSystem")
                        .WithMany()
                        .HasForeignKey("ConnectedSystemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId");

                    b.HasOne("SignalBox.Core.Recommenders.RecommenderEntityBase", "Recommender")
                        .WithMany("RecommendationDestinations")
                        .HasForeignKey("RecommenderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ConnectedSystem");

                    b.Navigation("Environment");

                    b.Navigation("Recommender");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.ItemsRecommendation", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("SignalBox.Core.Recommendations.RecommendationCorrelator", "RecommendationCorrelator")
                        .WithMany()
                        .HasForeignKey("RecommendationCorrelatorId");

                    b.HasOne("SignalBox.Core.Recommenders.ItemsRecommender", "Recommender")
                        .WithMany("Recommendations")
                        .HasForeignKey("RecommenderId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("SignalBox.Core.Metric", "TargetMetric")
                        .WithMany()
                        .HasForeignKey("TargetMetricId");

                    b.HasOne("SignalBox.Core.Customer", "Customer")
                        .WithMany()
                        .HasForeignKey("TrackedUserId");

                    b.Navigation("Customer");

                    b.Navigation("Environment");

                    b.Navigation("RecommendationCorrelator");

                    b.Navigation("Recommender");

                    b.Navigation("TargetMetric");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.ParameterSetRecommendation", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("SignalBox.Core.Recommendations.RecommendationCorrelator", "RecommendationCorrelator")
                        .WithMany()
                        .HasForeignKey("RecommendationCorrelatorId");

                    b.HasOne("SignalBox.Core.Recommenders.ParameterSetRecommender", "Recommender")
                        .WithMany("Recommendations")
                        .HasForeignKey("RecommenderId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("SignalBox.Core.Metric", "TargetMetric")
                        .WithMany()
                        .HasForeignKey("TargetMetricId");

                    b.HasOne("SignalBox.Core.Customer", "Customer")
                        .WithMany()
                        .HasForeignKey("TrackedUserId");

                    b.Navigation("Customer");

                    b.Navigation("Environment");

                    b.Navigation("RecommendationCorrelator");

                    b.Navigation("Recommender");

                    b.Navigation("TargetMetric");
                });

            modelBuilder.Entity("SignalBox.Core.Recommendations.RecommendationCorrelator", b =>
                {
                    b.HasOne("SignalBox.Core.ModelRegistration", "ModelRegistration")
                        .WithMany()
                        .HasForeignKey("ModelRegistrationId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("SignalBox.Core.ModelRegistration", null)
                        .WithMany("Correlators")
                        .HasForeignKey("ModelRegistrationId1");

                    b.HasOne("SignalBox.Core.Recommenders.RecommenderEntityBase", "Recommender")
                        .WithMany("RecommendationCorrelators")
                        .HasForeignKey("RecommenderId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("ModelRegistration");

                    b.Navigation("Recommender");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.InvokationLogEntry", b =>
                {
                    b.HasOne("SignalBox.Core.Recommendations.RecommendationCorrelator", "Correlator")
                        .WithMany()
                        .HasForeignKey("CorrelatorId");

                    b.HasOne("SignalBox.Core.Recommenders.RecommenderEntityBase", null)
                        .WithMany("RecommenderInvokationLogs")
                        .HasForeignKey("RecommenderEntityBaseId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.HasOne("SignalBox.Core.Customer", "Customer")
                        .WithMany()
                        .HasForeignKey("TrackedUserId");

                    b.Navigation("Correlator");

                    b.Navigation("Customer");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.PerformanceReportBase", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("SignalBox.Core.Recommenders.RecommenderEntityBase", "Recommender")
                        .WithMany()
                        .HasForeignKey("RecommenderId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Environment");

                    b.Navigation("Recommender");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.RecommenderEntityBase", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("SignalBox.Core.ModelRegistration", "ModelRegistration")
                        .WithMany("Recommenders")
                        .HasForeignKey("ModelRegistrationId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.Navigation("Environment");

                    b.Navigation("ModelRegistration");
                });

            modelBuilder.Entity("SignalBox.Core.Segment", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId");

                    b.Navigation("Environment");
                });

            modelBuilder.Entity("SignalBox.Core.TenantMembership", b =>
                {
                    b.HasOne("SignalBox.Core.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("SignalBox.Core.TenantTermsOfServiceAcceptance", b =>
                {
                    b.HasOne("SignalBox.Core.Tenant", "Tenant")
                        .WithMany("AcceptedTerms")
                        .HasForeignKey("TenantId");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("SignalBox.Core.TrackedUserSystemMap", b =>
                {
                    b.HasOne("SignalBox.Core.IntegratedSystem", "IntegratedSystem")
                        .WithMany()
                        .HasForeignKey("IntegratedSystemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Customer", "Customer")
                        .WithMany("IntegratedSystemMaps")
                        .HasForeignKey("TrackedUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Customer");

                    b.Navigation("IntegratedSystem");
                });

            modelBuilder.Entity("SignalBox.Core.WebhookReceiver", b =>
                {
                    b.HasOne("SignalBox.Core.Environment", "Environment")
                        .WithMany()
                        .HasForeignKey("EnvironmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("SignalBox.Core.IntegratedSystem", "IntegratedSystem")
                        .WithMany("WebhookReceivers")
                        .HasForeignKey("IntegratedSystemId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("Environment");

                    b.Navigation("IntegratedSystem");
                });

            modelBuilder.Entity("SignalBox.Core.HistoricCustomerMetric", b =>
                {
                    b.HasOne("SignalBox.Core.Metric", "Metric")
                        .WithMany("HistoricTrackedUserFeatures")
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("SignalBox.Core.Customer", "Customer")
                        .WithMany("HistoricCustomerMetrics")
                        .HasForeignKey("TrackedUserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Customer");

                    b.Navigation("Metric");
                });

            modelBuilder.Entity("SignalBox.Core.Metrics.GlobalMetricValue", b =>
                {
                    b.HasOne("SignalBox.Core.Metric", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Metric");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.ItemsRecommender", b =>
                {
                    b.HasOne("SignalBox.Core.RecommendableItem", "BaselineItem")
                        .WithMany()
                        .HasForeignKey("BaselineItemId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("SignalBox.Core.Metric", "TargetMetric")
                        .WithMany()
                        .HasForeignKey("TargetMetricId");

                    b.Navigation("BaselineItem");

                    b.Navigation("TargetMetric");
                });

            modelBuilder.Entity("SignalBox.Core.Customer", b =>
                {
                    b.Navigation("HistoricCustomerMetrics");

                    b.Navigation("IntegratedSystemMaps");
                });

            modelBuilder.Entity("SignalBox.Core.IntegratedSystem", b =>
                {
                    b.Navigation("WebhookReceivers");
                });

            modelBuilder.Entity("SignalBox.Core.Metric", b =>
                {
                    b.Navigation("Destinations");

                    b.Navigation("HistoricTrackedUserFeatures");
                });

            modelBuilder.Entity("SignalBox.Core.ModelRegistration", b =>
                {
                    b.Navigation("Correlators");

                    b.Navigation("Recommenders");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.RecommenderEntityBase", b =>
                {
                    b.Navigation("RecommendationCorrelators");

                    b.Navigation("RecommendationDestinations");

                    b.Navigation("RecommenderInvokationLogs");
                });

            modelBuilder.Entity("SignalBox.Core.Tenant", b =>
                {
                    b.Navigation("AcceptedTerms");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.ItemsRecommender", b =>
                {
                    b.Navigation("Recommendations");
                });

            modelBuilder.Entity("SignalBox.Core.Recommenders.ParameterSetRecommender", b =>
                {
                    b.Navigation("Recommendations");
                });
#pragma warning restore 612, 618
        }
    }
}
